@() @template(1){
<script type="text/javascript" src="/assets/this/js/search.generic.js"></script>

<div class="container-fluid">
	<div class="container">
		<div class="row">
		
		
			<div class="col-md-6">
				<div class="panel panel-info">
					<div class="panel-heading" data-toggle="collapse"
						data-target="#collapse1">
						<h4 class="panel-title">FRIEND REQUESTS</h4>
					</div>
					<div id="collapse1" class="panel-collapse collapse in">
						<div class="panel-body">
							<ul id="friend-requests"></ul>
						</div>
					</div>
				</div>
			</div>
		
			<div class="col-md-6">
				<div class="panel panel-info">
					<div class="panel-heading" data-toggle="collapse"
						data-target="#collapse2">
						<h4 class="panel-title">FRIEND LIST</h4>
					</div>
					<div id="collapse2" class="panel-collapse collapse in">
						<div class="panel-body">
							<ul id="friend-list"></ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="row">
			<div class="col-md-6">
				<div class="panel panel-info">
					<div class="panel-heading" data-toggle="collapse"
						data-target="#collapse3">
						<h4 class="panel-title">GROUP LIST</h4>
					</div>
					<div id="collapse3" class="panel-collapse collapse in">
						<div class="panel-body">
							<ul id="group-list"></ul>
						</div>
					</div>
				</div>
			</div>
			
			<div class="col-md-6">
				<div class="panel panel-info">
					<div class="panel-heading" data-toggle="collapse"
						data-target="#collapse4">
						<h4 class="panel-title">CREATE GROUP</h4>
					</div>
					<div id="collapse4" class="panel-collapse collapse in">
						<div class="panel-body">
							Name:<input type="text" id="group_name" />
							<button onclick="group_create($('#group_name').val())">Create</button>						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>


	$(document).ready(
			function() {
				
				$('#searchNav').show();
				$('#searchText').typeahead(SearchGeneric);	

				Signaling.listRequests(function(array) {
					var html = "";
					for ( var i in array) {
						var add_button = "<button onclick='user_add(\""
								+ array[i].uid + "\")'>accept</button>";
						var del_button = "<button onclick='user_del(\""
								+ array[i].uid + "\")'>deny</button>";

						html += "<li>" + array[i].email + add_button
								+ del_button + "</li>";
					}
					$("#friend-requests").html(html);
				});
				Signaling.listRelations(function(array) {
					var html = "";
					for ( var i in array) {
						var del_button = "<button onclick='user_del(\""
								+ array[i].uid + "\")'>deny</button>";
						html += "<li>" + array[i].email + del_button + "</li>";
					}
					$("#friend-list").html(html);
				});
				Signaling.listGroups(function(array) {
					var html = "";
					for ( var i in array) {
						html += "<li><a href='/group/"+array[i].id+"'>"
								+ array[i].name + "</a></li>";
					}
					$("#group-list").html(html);
				});

			});

	function user_del(userId) {
		var success = function() {
			document.location = "/";
		}
		Signaling.rejectRelation(userId, success);
	}

	function group_create(name) {
		var success = function() {
			document.location = "/";
		}
		Signaling.createGroup(name, success);
	}

	function user_add(userId) {
		var success = function() {
			document.location = "/";
		}
		Signaling.addRelation(userId, success);
	}


</script>
}