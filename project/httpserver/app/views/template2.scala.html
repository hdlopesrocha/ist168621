@(tab : Integer)(actionBar : Html)(content : Html)

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>HyperCommunications</title>
    <meta name="generator" content="Bootply"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link type="text/css" href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link type="text/css" href="/assets/bootstrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link type="text/css" href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link type="text/css" href="/assets/this/css/main.css" rel="stylesheet">
    <link type="text/css" href="/assets/this/css/neo.css" rel="stylesheet">
    <link type="text/css" href="/assets/this/css/simple-sidebar.css" rel="stylesheet">
    <link type="text/css" href="/assets/codemirror/codemirror.css" rel="stylesheet">
    <link type="text/css" href="/assets/toastr/toastr.min.css" rel="stylesheet">

    <!--<link type="text/css" href="/assets/jquery-ui/jquery-ui.min.css" rel="stylesheet" media="all">
        <link type="text/css" href="/assets/jquery-ui/jquery-ui.min.css" rel="stylesheet" media="all">
        <link type="text/css" href="/assets/jquery-ui/jquery-ui-timepicker-addon.css" rel="stylesheet" media="all" -->
    <link type="text/css" href="/assets/timeline/vis.css" rel="stylesheet"/>

    <script type="text/javascript" src="/assets/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/bootstrap/js/bootstrap.min.js"></script>

    <!--<script src="/assets/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
     <script src="/assets/jquery-ui/jquery-ui-timepicker-addon.js"  type="text/javascript"></script>
    <script src="/assets/jquery-ui/jquery-ui-sliderAccess.js" type="text/javascript"></script> -->

</head>
<body>

<div id="searchPeopleModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Find People</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="control-label">User:</label>
                    <input class="form-control" placeholder="Search" name="q" type="text" id="searchPeople" data-provide="typeahead" autocomplete="off" >
                </div>
            </div>
        </div>
    </div>
</div>



<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <a href="/">
                    <img class="navbar-brand" src="/assets/images/favicon.png"/>
                    HyperChat
                </a>
            </li>
            <div style="color:white;padding:18px;display:none;" id="friendRequestsLabel"><i class="fa fa-user-plus"></i>&nbsp;&nbsp;&nbsp;&nbsp;FRIENDSHIP REQUESTS</div>
            <div id="request-list"></div>
            <div style="color:white;padding:18px;"><i class="fa fa-users"></i>&nbsp;&nbsp;&nbsp;&nbsp;FRIENDS</div>
            <div id="friend-list"></div>
        </ul>

        <div id="menu-toggle"></div>


    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">

                <div class="center">

                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                    <div id="navbar" class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li><a href="/"><i class="fa fa-home"></i></a></li>

                        </ul>

                        <div class="col-sm-3 col-md-3">
                            <div class="navbar-form" role="search">
                                <div class="input-group">
                                    <input class="form-control" placeholder="Search" name="q" type="text" id="searchText" data-provide="typeahead" autocomplete="off" >
                                    <div class="input-group-btn">
                                        <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <ul class="nav navbar-nav navbar-right">
                            @if(session.get("uid")!=null){

                            @actionBar

                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle dropdown-user" data-toggle="dropdown"
                                   aria-expanded="false">
                                    Friendship Requests <i class="fa fa-user-plus"></i>
                                    <div style="display:inline" id="requestCount"></div>
                                </a>
                                <ul class="dropdown-menu" id="requestList">

                                </ul>
                            </li>
                            <li id="logout-button">
                                <a><i class="fa fa-sign-out"></i></a>
                            </li>

                            }
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </nav>


        <div class="container-fluid mainContainer">
            @content
        </div>
        <!-- /#page-content-wrapper -->

    </div>

</div>
    <script type="text/javascript">

    function gotoUser(uid){
        document.location = "/user/"+uid;
    }

   function showSearchOPeople(){
        $('#searchPeopleModal').modal('show');
    }

	$(document).ready(function() {
        $('#searchPeople').typeahead(SearchPeople);

         $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
         });


       HyperHttp.listRequests(function(array) {
            console.log("listRequests",array);
            var html = "";
            var html2 = "";

            for ( var i in array) {
                var user = array[i];

                html += '<li><a href="/user/'+user.id+'"><i class="fa fa-fw fa-user"></i> '+user.name+'</a></li>';
                html2 += "<li onclick='gotoUser(\""+ user.id+"\")' style='margin-top: 0px;'><a><span style='background-image: url(\""+user.photo+"\"); width: 20px; height: 20px;margin:0px 16px 0px 0px' class='fa-stack circular'></span>" + user.name + "</a></li>";
                $("#friendRequestsLabel").show();
            }

            html += '<li onclick="showSearchOPeople()"><a><i class="fa fa-fw fa-plus"></i> Find people...</a></li>';

            $("#request-list").html(html2);

            $("#requestList").html(html);
            if(array.length) {
                $("#requestCount").html("<span class='badge badge-danger'>"+array.length+"</span>");
            }
        });
        HyperHttp.listRelations(function(array) {
            console.log("listRelations",array);
            var html = "";
            for ( var i in array) {
                var user = array[i];
                html += "<li onclick='gotoUser(\""+ user.id+"\")' style='margin-top: 0px;'><a><span style='background-image: url(\""+user.photo+"\"); width: 20px; height: 20px;margin:0px 16px 0px 0px' class='fa-stack circular'></span>" + user.name + "</a></li>";
            }
            $("#friend-list").html(html);
        });

        $("#fullscreen").hide();
        $("#logout-button").click(function(){
            HyperHttp.logout(function(){
                document.location = document.location;
            })
        });
    });





    </script>
    <script type="text/javascript" src="/assets/moment/moment.min.js"></script>
    <script type="text/javascript" src="/assets/bootstrap/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="/assets/bootstrap/js/bootstrap-list-filter.min.js"></script>
    <script type="text/javascript" src="/assets/timeline/vis.js"></script>
    <script type="text/javascript" src="/assets/this/js/hyper.http.js"></script>
    <script type="text/javascript" src="/assets/typeahead/bootstrap3-typeahead.js"></script>
    <script type="text/javascript" src="/assets/operation-transformation/ot.js"></script>
    <script type="text/javascript" src="/assets/jquery/jquery.qrcode-0.12.0.min.js"></script>
    <script type="text/javascript" src="/assets/codemirror/codemirror.js"></script>
<script type="text/javascript" src="/assets/this/js/search.generic.js"></script>
<script type="text/javascript" src="/assets/toastr/toastr.min.js"></script>

</body>


</html>
